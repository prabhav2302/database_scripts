# AirBnB MongoDB Analysis

A little assignment to practice importing and analyzing data within a MongoDB database.


## Dataset Details
My dataset is about AirBnB listings in Broward County,Florida. This is the [link](http://data.insideairbnb.com/united-states/fl/broward-county/2021-02-23/data/listings.csv.gz) to the dataset. The file was originally in a CSV format, however MongoDB has no problem dealing with data which has a fixed schema.  
  
Here are the first 20 entries in the raw csv file. 

|id    |listing_url                        |scrape_id     |last_scraped|name                                              |description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |neighborhood_overview                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |picture_url                                                                                            |host_id|host_url                                 |host_name                |host_since|host_location                            |host_about                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |host_response_time|host_response_rate|host_acceptance_rate|host_is_superhost|host_thumbnail_url                                                                                        |host_picture_url                                                                                             |host_neighbourhood|host_listings_count|host_total_listings_count|host_verifications                                                                                                       |host_has_profile_pic|host_identity_verified|neighbourhood                            |neighbourhood_cleansed|neighbourhood_group_cleansed|latitude|longitude|property_type              |room_type      |accommodates|bathrooms|bathrooms_text  |bedrooms|beds|amenities                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |price  |minimum_nights|maximum_nights|minimum_minimum_nights|maximum_minimum_nights|minimum_maximum_nights|maximum_maximum_nights|minimum_nights_avg_ntm|maximum_nights_avg_ntm|calendar_updated|has_availability|availability_30|availability_60|availability_90|availability_365|calendar_last_scraped|number_of_reviews|number_of_reviews_ltm|number_of_reviews_l30d|first_review|last_review|review_scores_rating|review_scores_accuracy|review_scores_cleanliness|review_scores_checkin|review_scores_communication|review_scores_location|review_scores_value|license|instant_bookable|calculated_host_listings_count|calculated_host_listings_count_entire_homes|calculated_host_listings_count_private_rooms|calculated_host_listings_count_shared_rooms|reviews_per_month|
|------|-----------------------------------|--------------|------------|--------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------|-------|-----------------------------------------|-------------------------|----------|-----------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------|------------------|--------------------|-----------------|----------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------|------------------|-------------------|-------------------------|-------------------------------------------------------------------------------------------------------------------------|--------------------|----------------------|-----------------------------------------|----------------------|----------------------------|--------|---------|---------------------------|---------------|------------|---------|----------------|--------|----|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------|--------------|--------------|----------------------|----------------------|----------------------|----------------------|----------------------|----------------------|----------------|----------------|---------------|---------------|---------------|----------------|---------------------|-----------------|---------------------|----------------------|------------|-----------|--------------------|----------------------|-------------------------|---------------------|---------------------------|----------------------|-------------------|-------|----------------|------------------------------|-------------------------------------------|--------------------------------------------|-------------------------------------------|-----------------|
|57818 |https://www.airbnb.com/rooms/57818 |20210223032208|2021-02-23  |Private house close to the beach!                 |Beautifully private duplex that allows you to enjoy the zen of life!  Watch the neighbors walking their pets...jogging near the lake...or riding their bikes, or join in and jog to the beach!  If you don't want to disconnect...we have WIFI!<br /><br />Please note:  Since this is my home, I only rent to people who aren't afraid to put a validated picture/profile (that AIRBNB has verified) on their page before I decide. Don't hide who you are...<br /><br /><b>The space</b><br />Peaceful house on Nature Preserve Close to everything. Hollywood, Florida Vacation Rental, South East, Florida, USA <br />Accommodations: 2 bedrooms and 1 full bathrooms. This house has a living room with a leather sectional and a beautiful fireplace (even though it's Florida).<br />Beautifully loaded kitchen w/granite countertops and bar, Dining Room, Living room. Tres Chique!   New flat screen TV.  Can sleep 4.  <br />This precious house is located on a quiet street. There is beautiful walking, jogging and biking|This is a family oriented, quiet, peaceful neighborhood, so please respect your neighbors.  This is a duplex, renters in back house (seperate).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |https://a0.muscache.com/pictures/347696/9d51689b_original.jpg                                          |275948 |https://www.airbnb.com/users/show/275948 |VonJon                   |2010-11-01|Hollywood, Florida, United States        |I love my house...the neighbors are wonderful, and I would love to share it with you!  We love food...big foodies!  We try to eat healthy, but do like our deserts!     I will help you in anyway possible...I know a lot of things to do...restaurants in the area that are exceptional...kid activities, golf courses, etc.  Just let me know!                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |within an hour    |100%              |71%                 |f                |https://a0.muscache.com/im/pictures/user/1f2670bf-576e-4ec9-bb6c-69276c8f520f.jpg?aki_policy=profile_small|https://a0.muscache.com/im/pictures/user/1f2670bf-576e-4ec9-bb6c-69276c8f520f.jpg?aki_policy=profile_x_medium|                  |1                  |1                        |['email', 'phone', 'facebook', 'reviews', 'jumio', 'offline_government_id', 'selfie', 'government_id', 'identity_manual']|t                   |t                     |Hollywood, Florida, United States        |Hollywood             |                            |26.0167 |-80.12437|Entire house               |Entire home/apt|5           |         |1 bath          |2       |2   |["Bed linens", "Dedicated workspace", "BBQ grill", "Indoor fireplace", "Dishes and silverware", "Single level home", "Hangers", "TV", "Stove", "Wifi", "Kitchen", "Free street parking", "Dishwasher", "Hair dryer", "Iron", "Refrigerator", "Microwave", "Patio or balcony", "Coffee maker", "Cable TV", "Shampoo", "Essentials", "Oven", "Children\u2019s dinnerware", "Private entrance", "Lockbox", "Fire extinguisher", "Heating", "Air conditioning", "Children\u2019s books and toys", "Hot water", "Extra pillows and blankets", "Smoke alarm", "Free parking on premises", "Long term stays allowed", "Bathtub", "Cooking basics"]                                                                                                                                                                                                                                |$125.00|2             |30            |2                     |2                     |30                    |30                    |2.0                   |30.0                  |                |t               |8              |26             |56             |331             |2021-02-23           |43               |4                    |0                     |2013-01-03  |2021-01-11 |92                  |9                     |9                        |10                   |10                         |10                    |9                  |       |f               |1                             |1                                          |0                                           |0                                          |0.43             |
|69824 |https://www.airbnb.com/rooms/69824 |20210223032208|2021-02-24  |2 bd/2ba Oceanfront Condo                         |<b>The space</b><br />Beautiful and meticulous 2 master suite luxury oceanfront condo fully furnished and equipped with WIFI, digital cable and unlimited long distance in the US and Canada. <br /> <br />Building is full of amenities including tennis court, swimming pool, jacuzzi, workout room, covered and valet parking, direct beach access. <br /> <br />Conveniently located in Hallandale Beach between Miami and Fort Lauderdale, you’re just minutes from two international airports, two seaports, as well as world-class shopping at Bal Harbour and Aventura. And just minutes away from Hollywood Beach Boardwalk, one of the five best boardwalks in the country as ranked by Travel & Leisure. <br /> <br />Minimum rental is 30 days.  Available beginning May 1st, 2011. <br /> <br />Call for additional details.                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |https://a0.muscache.com/pictures/443102/f6b94ead_original.jpg                                          |351303 |https://www.airbnb.com/users/show/351303 |Tracy                    |2011-01-17|Silver Spring, Maryland, United States   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |within an hour    |100%              |80%                 |t                |https://a0.muscache.com/im/users/351303/profile_pic/1304341323/original.jpg?aki_policy=profile_small      |https://a0.muscache.com/im/users/351303/profile_pic/1304341323/original.jpg?aki_policy=profile_x_medium      |                  |2                  |2                        |['email', 'phone', 'facebook', 'kba']                                                                                    |t                   |t                     |                                         |Hallandale Beach      |                            |25.9784 |-80.12028|Entire apartment           |Entire home/apt|6           |         |2 baths         |2       |4   |["Smart lock", "Hair dryer", "Iron", "Dryer", "Dedicated workspace", "Elevator", "Free parking on premises", "Long term stays allowed", "Hot tub", "Pool", "Cable TV", "Wifi", "Washer", "Hangers", "TV", "Heating", "Kitchen", "Air conditioning", "Gym"]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |$140.00|30            |365           |30                    |30                    |365                   |365                   |30.0                  |365.0                 |                |t               |0              |29             |59             |334             |2021-02-24           |1                |0                    |0                     |2018-02-11  |2018-02-11 |100                 |                      |                         |                     |                           |                      |                   |       |f               |2                             |2                                          |0                                           |0                                          |0.03             |
|83449 |https://www.airbnb.com/rooms/83449 |20210223032208|2021-02-25  |MARY POP APTS 2/1 APT SLEEP 5                     |MARY POP APARTMENTS 1&2 BEDROOM SUITES ACCOMMODATION 1-5 PEOPLE, WE ARE OFFERING TEMPORARY ACCOMMODATIONS SHORT TERM, LONGER TERM UP TO 6 MONTHS , VACATIONERS, RELOCATIONS FROM OTHER SATES OR COUNTRIES TO SOUTH FLORIDA, CORPORATE HOUSING,<br /><br /><b>The space</b><br />NOTE: WE ARE HERE TO HELP YOU .<br />TEMPORARY ACCOMMODATION, VACATION RENTALS, CORPORATE HOUSING, RELOCATIONS, HOUSING FOR TRAVELING NURSES,  HOUSING FOR STUDENTS, CONTACT US FOR DETAILS  <br />RENOVATED 2 BEDROOM 1 BATH APARTMENT 900 SQ FT.  MARY POP APARTMENTS 29 E SHERIDAN ST, DANIA BEACH FL <br /><br />FREE TRANSPORTATION TO FORT LAUDERDALE AIRPORT AND PORT EVERGLADES<br />FREE BIKES TO THE BEACH<br /> <br />HOTEL RATES IN THIS AREA ARE $100-$150/NIGHT FOR 1 ROOM, MARY POP APARTMENTS IS OFFERING 4 ROOMS FOR LESS<br />Activities <br />Pier Fishing <br />Medical Services <br />Massage Therapist <br />Kayaking <br />Snorkeling <br />Scuba Diving Or Snorkeling <br />ATM/Bank <br />Fitness Center <br />Shopping <br />L|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
```

### Query 3  
After observing the query above, I noticed that both Tracy and Paul were superhosts. Tracy had a host_id of 351303. Paul had a host_id of 1097874

```javascript
let q3_filter = {
  "$or": [
    {
      host_id: 351303,
    },
    {
      host_id: 1097874,
    },
  ],
}

let q3_projection = {
    _id:0, 
    name: 1,
    price: 1, 
    neighbourhood: 1, 
    host_name: 1, 
    host_is_superhost: 1,
}

db.listings.find(q3_filter,q3_projection)
```  
Sample Documents: 
```javascript  
{ "name" : "2 bd/2ba Oceanfront Condo", "host_name" : "Tracy", "host_is_superhost" : "t", "neighbourhood" : "", "price" : "$140.00" }
{ "name" : "Gorgeous Private Las Olas-Idlewyld Home", "host_name" : "Paul", "host_is_superhost" : "t", "neighbourhood" : "Fort Lauderdale, Florida, United States", "price" : "$479.00" }
{ "name" : "Luxury Oceanfront Condo with Two Master suites", "host_name" : "Tracy", "host_is_superhost" : "t", "neighbourhood" : "", "price" : "$175.00" }
```
Insight:  
This shows that Tracy has two listings and Paul has one listing. Paul's listing costs about 479$, whereas Tracy has one listing for 140 and one listing for 175$.

### Query 4  
```javascript  
db.listings.distinct( "host_name" )
```  
Sample Documents:
```javascript
"A. Hanes",
"AMG Luxe",
"Aaron",
"Aaron Isaac",
```

### Query 5
```javascript
let q5_filter = {
  $match:{
    "neighbourhood_cleansed": "Hollywood",
    "beds": {
        $gt:2,
    },
    "review_scores_rating":{
        $ne:"",
    }
  }
}

let q5_projection = {
  $project:{
    _id:0,
    name:1,
    beds:1,
    city:1,
    review_scores_rating:1,
    price:1,
  }
}

let q5_sorting = {
    $sort:{
    review_scores_rating: -1
    }
}

db.listings.aggregate([q5_filter,q5_projection,q5_sorting])
```

Sample Documents: 
```javascript
{ "name" : "SPECTACULAR DIRECT OCEANFRONT VIEWS - Amazing", "beds" : 3, "price" : "$125.00", "review_scores_rating" : 100 }
{ "name" : "Quiet and Cozy yet Convenient", "beds" : 3, "price" : "$150.00", "review_scores_rating" : 100 }
{ "name" : "PENTHOUSE SUITE HOLLYWOOD BEACH,FL", "beds" : 3, "price" : "$128.00", "review_scores_rating" : 100 }
```  
  
Insight:  
One can rent a nice place in Hollywood Florida, with 3 or more beds for around the price range of $100-300. My dataset did not have the "neighbourhood_group_cleansed" field so instead I used the "neighbourhood_cleansed" field instead for the matching.

### Query 6

```javascript
let q6_grouping = {
  $group: {
  _id: "$host_id",
  listingCount: {$sum: 1}
  }
}
db.listings.aggregate([q6_grouping])
```
Sample Documents: 
```javascript
{ "_id" : 377647361, "listingCount" : 1 }
{ "_id" : 41837361, "listingCount" : 2 }
{ "_id" : 151861939, "listingCount" : 1 }
```

### Query 7

```javascript
let q7_grouping = {
  $group: {
    _id:"$neighbourhood_cleansed",
    avg_rating: {$avg:"$review_scores_rating"},
  },
};

let q7_matching = {$match:
  {avg_rating:{$gt:95 }}
}

let q7_sorting = {$sort:
  {avg_rating:-1}
}

db.listings.aggregate([q7_grouping,q7_matching,q7_sorting])
```  
  
Sample Documents: 
```javascript
{ "_id" : "Tribal Land", "avg_rating" : 100 }
{ "_id" : "Hillsboro Beach", "avg_rating" : 99.63636363636364 }
{ "_id" : "Southwest Ranches", "avg_rating" : 99.23076923076923 }
```
  
Insights:  
It appears Tribal Land, Hillsboro Beach, and Southwest Ranches are the 3 neighbourhoods in Broward country with the top average review score rating. Potential visitors may want to take this into account when choosing which neighbourhood to live in for their stay. My dataset did not have the "neighbourhood_group_cleansed" field so instead I used the "neighbourhood_cleansed" field instead for the grouping.

## Extra-credit
This assignment deserves extra credit. The file named extra_credit.py in the main directory reproduces query 5 using the pymongo module. This was the output on the terminal:

![sc1](./images/sc1.png)
![sc2](./images/sc2.png)
